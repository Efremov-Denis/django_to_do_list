<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Главная страница</title>
        <style>
            .complete-button {
                background-color: yellow;
            }
             .reset-button {
                background-color: lightgreen;
            }
        </style>
</head>
<body>
    <h1>Добро пожаловать в моё приложение!</h1>
    {% if user.is_authenticated %}
        <p>Привет, {{ user.username }}!
        <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}  
            <button type="submit">Выйти</button>
        </form>
    {% else %}
         <p><a href="{% url 'register' %}">Зарегистрироваться</a> | <a href="{% url 'login' %}">Войти</a></p>
    {% endif %}
    <ul>
        {% for task in tasks %}
            <li>
                {{ task.title }}
                <a href="{% url 'task_update' pk=task.pk %}">Редактировать</a>
                <form method="post" action="{% url 'task_delete' pk=task.pk %}" style="display:inline;">
                     {% csrf_token %}
                    <button type="submit" >Удалить</button>
                </form>
                 <form method="post" action="{% url 'task_toggle_complete' pk=task.pk %}" style="display:inline;">
                     {% csrf_token %}
                        <button type="submit" class="{% if task.completed %}reset-button{% else %}complete-button{% endif %}">
                            {% if task.completed %}Задача выполнена{% else %}Задача в работе{% endif %}
                    </button>
                </form>
            </li>
        {% endfor %}
    </ul>
    <a href="{% url 'task_create' %}">Создать задачу</a>
</body>
</html>